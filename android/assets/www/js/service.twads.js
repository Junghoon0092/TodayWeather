angular.module("service.twads",[]).factory("TwAds",["$rootScope","$cordovaNetwork",function(n,e){function t(e){n.viewAdsBanner=e,n.contentBottom=e?100:50,angular.element(document.getElementsByClassName("tabs")).css("margin-bottom",e?"50px":"0px")}var o={};return o.enableAds,o.showAds,o.requestEnable,o.requestShow,o.loaded=!1,o.ready=!1,o.bannerAdUnit="",o.interstitialAdUnit="",o.bannerCreated=!1,o.loadTwAdsInfo=function(){var n=JSON.parse(localStorage.getItem("twAdsInfo"));o.ready=!0,o.setEnableAds(void 0!=o.requestEnable?o.requestEnable:void 0==n||void 0==n.enable?!0:n.enable)},o.saveTwAdsInfo=function(n){var e={enable:n};localStorage.setItem("twAdsInfo",JSON.stringify(e))},o._admobCreateBanner=function(){AdMob.createBanner({adId:o.bannerAdUnit,autoShow:!1},function(){o.bannerCreated=!0,o.setShowAds(void 0!=o.requestShow?o.requestShow:o.enableAds)},function(n){})},o.setEnableAds=function(n){return n!=o.enableAds?1!=o.ready?void(o.requestEnable=n):void(n===!1?(o.setShowAds(!1),AdMob.removeBanner(function(){},function(n){}),o.enableAds=n,o.bannerCreated=!1,t(n)):(o.enableAds=n,t(n),e.isOnline()&&o._admobCreateBanner())):void 0},o.setShowAds=function(n){return o.showAds!==n?1!=o.ready?void(o.requestShow=n):void((o.enableAds!==!1||n!==!0)&&(o.showAds=n,o._setAdMobShowAd(n))):void 0},o._setAdMobShowAd=function(n){window.AdMob&&(n===!0?AdMob.showBanner(AdMob.AD_POSITION.BOTTOM_CENTER,function(){},function(n){}):AdMob.hideBanner(function(){},function(n){}))},o}]).run(["$ionicPlatform","TwAds","Util",function(n,e,t){n.ready(function(){var n=!0;n&&window.AdMob&&1!=e.loaded&&(e.loaded=!0,ionic.Platform.isIOS()?(e.bannerAdUnit=t.admobIOSBannerAdUnit,e.interstitialAdUnit=t.admobIOSInterstitialAdUnit):ionic.Platform.isAndroid()&&(e.bannerAdUnit=t.admobAndroidBannerAdUnit,e.interstitialAdUnit=t.admobAndroidInterstitialAdUnit),AdMob.setOptions({adSize:"BANNER",overlap:!0,isTesting:t.isDebug(),autoShow:!1},function(){e.loadTwAdsInfo()},function(n){}),document.addEventListener("onAdFailLoad",function(n){}),document.addEventListener("onAdLoaded",function(n){"banner"==n.adType?e.showAds===!0&&e._setAdMobShowAd(!0):"interstitial"==n.adType}),document.addEventListener("onAdPresent",function(n){}),document.addEventListener("online",function(){e.enableAds===!0&&e.bannerCreated===!1&&e._admobCreateBanner()},!1))})}]);